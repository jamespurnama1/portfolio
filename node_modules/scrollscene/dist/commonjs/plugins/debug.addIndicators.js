"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _scrollmagicWithSsr = _interopRequireDefault(require("../scrollmagic-with-ssr"));

var NAMESPACE = 'debug.addIndicators';
var console = window.console || {},
    err = Function.prototype.bind.call(console.error || console.log || function () {}, console);

if (!_scrollmagicWithSsr["default"]) {
  err('(' + NAMESPACE + ") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.");
}

var FONT_SIZE = '0.85em',
    ZINDEX = '9999',
    EDGE_OFFSET = 15;
var _util = _scrollmagicWithSsr["default"]._util,
    _autoindex = 0;

_scrollmagicWithSsr["default"].Scene.extend(function () {
  var Scene = this,
      _indicator;

  var log = function log() {
    if (Scene._log) {
      Array.prototype.splice.call(arguments, 1, 0, '(' + NAMESPACE + ')', '->');

      Scene._log.apply(this, arguments);
    }
  };

  Scene.addIndicators = function (options) {
    if (!_indicator) {
      var DEFAULT_OPTIONS = {
        name: '',
        indent: 0,
        parent: undefined,
        colorStart: 'green',
        colorEnd: 'red',
        colorTrigger: 'blue'
      };
      options = _util.extend({}, DEFAULT_OPTIONS, options);
      _autoindex++;
      _indicator = new Indicator(Scene, options);
      Scene.on('add.plugin_addIndicators', _indicator.add);
      Scene.on('remove.plugin_addIndicators', _indicator.remove);
      Scene.on('destroy.plugin_addIndicators', Scene.removeIndicators);

      if (Scene.controller()) {
        _indicator.add();
      }
    }

    return Scene;
  };

  Scene.removeIndicators = function () {
    if (_indicator) {
      _indicator.remove();

      this.off('*.plugin_addIndicators');
      _indicator = undefined;
    }

    return Scene;
  };
});

_scrollmagicWithSsr["default"].Controller.addOption('addIndicators', false);

_scrollmagicWithSsr["default"].Controller.extend(function () {
  var Controller = this,
      _info = Controller.info(),
      _container = _info.container,
      _isDocument = _info.isDocument,
      _vertical = _info.vertical,
      _indicators = {
    groups: []
  };

  var log = function log() {
    if (Controller._log) {
      Array.prototype.splice.call(arguments, 1, 0, '(' + NAMESPACE + ')', '->');

      Controller._log.apply(this, arguments);
    }
  };

  if (Controller._indicators) {
    log(2, "WARNING: Scene already has a property '_indicators', which will be overwritten by plugin.");
  }

  this._indicators = _indicators;

  var handleBoundsPositionChange = function handleBoundsPositionChange() {
    _indicators.updateBoundsPositions();
  };

  var handleTriggerPositionChange = function handleTriggerPositionChange() {
    _indicators.updateTriggerGroupPositions();
  };

  _container.addEventListener('resize', handleTriggerPositionChange);

  if (!_isDocument) {
    window.addEventListener('resize', handleTriggerPositionChange);
    window.addEventListener('scroll', handleTriggerPositionChange);
  }

  _container.addEventListener('resize', handleBoundsPositionChange);

  _container.addEventListener('scroll', handleBoundsPositionChange);

  this._indicators.updateBoundsPositions = function (specificIndicator) {
    var groups = specificIndicator ? [_util.extend({}, specificIndicator.triggerGroup, {
      members: [specificIndicator]
    })] : _indicators.groups,
        g = groups.length,
        css = {},
        paramPos = _vertical ? 'left' : 'top',
        paramDimension = _vertical ? 'width' : 'height',
        edge = _vertical ? _util.get.scrollLeft(_container) + _util.get.width(_container) - EDGE_OFFSET : _util.get.scrollTop(_container) + _util.get.height(_container) - EDGE_OFFSET,
        b,
        triggerSize,
        group;

    while (g--) {
      group = groups[g];
      b = group.members.length;
      triggerSize = _util.get[paramDimension](group.element.firstChild);

      while (b--) {
        css[paramPos] = edge - triggerSize;

        _util.css(group.members[b].bounds, css);
      }
    }
  };

  this._indicators.updateTriggerGroupPositions = function (specificGroup) {
    var groups = specificGroup ? [specificGroup] : _indicators.groups,
        i = groups.length,
        container = _isDocument ? document.body : _container,
        containerOffset = _isDocument ? {
      top: 0,
      left: 0
    } : _util.get.offset(container, true),
        edge = _vertical ? _util.get.width(_container) - EDGE_OFFSET : _util.get.height(_container) - EDGE_OFFSET,
        paramDimension = _vertical ? 'width' : 'height',
        paramTransform = _vertical ? 'Y' : 'X';
    var group, elem, pos, elemSize, transform;

    while (i--) {
      group = groups[i];
      elem = group.element;
      pos = group.triggerHook * Controller.info('size');
      elemSize = _util.get[paramDimension](elem.firstChild.firstChild);
      transform = pos > elemSize ? 'translate' + paramTransform + '(-100%)' : '';

      _util.css(elem, {
        top: containerOffset.top + (_vertical ? pos : edge - group.members[0].options.indent),
        left: containerOffset.left + (_vertical ? edge - group.members[0].options.indent : pos)
      });

      _util.css(elem.firstChild.firstChild, {
        '-ms-transform': transform,
        '-webkit-transform': transform,
        transform: transform
      });
    }
  };

  this._indicators.updateTriggerGroupLabel = function (group) {
    var text = 'trigger' + (group.members.length > 1 ? '' : ' ' + group.members[0].options.name),
        elem = group.element.firstChild.firstChild,
        doUpdate = elem.textContent !== text;

    if (doUpdate) {
      elem.textContent = text;

      if (_vertical) {
        _indicators.updateBoundsPositions();
      }
    }
  };

  this.addScene = function (newScene) {
    if (this._options.addIndicators && newScene instanceof _scrollmagicWithSsr["default"].Scene && newScene.controller() === Controller) {
      newScene.addIndicators();
    }

    this.$super.addScene.apply(this, arguments);
  };

  this.destroy = function () {
    _container.removeEventListener('resize', handleTriggerPositionChange);

    if (!_isDocument) {
      window.removeEventListener('resize', handleTriggerPositionChange);
      window.removeEventListener('scroll', handleTriggerPositionChange);
    }

    _container.removeEventListener('resize', handleBoundsPositionChange);

    _container.removeEventListener('scroll', handleBoundsPositionChange);

    this.$super.destroy.apply(this, arguments);
  };

  return Controller;
});

var Indicator = function Indicator(Scene, options) {
  var Indicator = this,
      _elemBounds = TPL.bounds(),
      _elemStart = TPL.start(options.colorStart),
      _elemEnd = TPL.end(options.colorEnd),
      _boundsContainer = options.parent && _util.get.elements(options.parent)[0],
      _vertical,
      _ctrl;

  var log = function log() {
    if (Scene._log) {
      Array.prototype.splice.call(arguments, 1, 0, '(' + NAMESPACE + ')', '->');

      Scene._log.apply(this, arguments);
    }
  };

  options.name = options.name || _autoindex;
  _elemStart.firstChild.textContent += ' ' + options.name;
  _elemEnd.textContent += ' ' + options.name;

  _elemBounds.appendChild(_elemStart);

  _elemBounds.appendChild(_elemEnd);

  Indicator.options = options;
  Indicator.bounds = _elemBounds;
  Indicator.triggerGroup = undefined;

  this.add = function () {
    _ctrl = Scene.controller();
    _vertical = _ctrl.info('vertical');

    var isDocument = _ctrl.info('isDocument');

    if (!_boundsContainer) {
      _boundsContainer = isDocument ? document.body : _ctrl.info('container');
    }

    if (!isDocument && _util.css(_boundsContainer, 'position') === 'static') {
      _util.css(_boundsContainer, {
        position: 'relative'
      });
    }

    Scene.on('change.plugin_addIndicators', handleTriggerParamsChange);
    Scene.on('shift.plugin_addIndicators', handleBoundsParamsChange);
    updateTriggerGroup();
    updateBounds();
    setTimeout(function () {
      _ctrl._indicators.updateBoundsPositions(Indicator);
    }, 0);
    log(3, 'added indicators');
  };

  this.remove = function () {
    if (Indicator.triggerGroup) {
      Scene.off('change.plugin_addIndicators', handleTriggerParamsChange);
      Scene.off('shift.plugin_addIndicators', handleBoundsParamsChange);

      if (Indicator.triggerGroup.members.length > 1) {
        var group = Indicator.triggerGroup;
        group.members.splice(group.members.indexOf(Indicator), 1);

        _ctrl._indicators.updateTriggerGroupLabel(group);

        _ctrl._indicators.updateTriggerGroupPositions(group);

        Indicator.triggerGroup = undefined;
      } else {
        removeTriggerGroup();
      }

      removeBounds();
      log(3, 'removed indicators');
    }
  };

  var handleBoundsParamsChange = function handleBoundsParamsChange() {
    updateBounds();
  };

  var handleTriggerParamsChange = function handleTriggerParamsChange(e) {
    if (e.what === 'triggerHook') {
      updateTriggerGroup();
    }
  };

  var addBounds = function addBounds() {
    var v = _ctrl.info('vertical');

    _util.css(_elemStart.firstChild, {
      'border-bottom-width': v ? 1 : 0,
      'border-right-width': v ? 0 : 1,
      bottom: v ? -1 : options.indent,
      right: v ? options.indent : -1,
      padding: v ? '0 8px' : '2px 4px'
    });

    _util.css(_elemEnd, {
      'border-top-width': v ? 1 : 0,
      'border-left-width': v ? 0 : 1,
      top: v ? '100%' : '',
      right: v ? options.indent : '',
      bottom: v ? '' : options.indent,
      left: v ? '' : '100%',
      padding: v ? '0 8px' : '2px 4px'
    });

    _boundsContainer.appendChild(_elemBounds);
  };

  var removeBounds = function removeBounds() {
    _elemBounds.parentNode.removeChild(_elemBounds);
  };

  var updateBounds = function updateBounds() {
    if (_elemBounds.parentNode !== _boundsContainer) {
      addBounds();
    }

    var css = {};
    css[_vertical ? 'top' : 'left'] = Scene.triggerPosition();
    css[_vertical ? 'height' : 'width'] = Scene.duration();

    _util.css(_elemBounds, css);

    _util.css(_elemEnd, {
      display: Scene.duration() > 0 ? '' : 'none'
    });
  };

  var addTriggerGroup = function addTriggerGroup() {
    var triggerElem = TPL.trigger(options.colorTrigger);
    var css = {};
    css[_vertical ? 'right' : 'bottom'] = 0;
    css[_vertical ? 'border-top-width' : 'border-left-width'] = 1;

    _util.css(triggerElem.firstChild, css);

    _util.css(triggerElem.firstChild.firstChild, {
      padding: _vertical ? '0 8px 3px 8px' : '3px 4px'
    });

    document.body.appendChild(triggerElem);
    var newGroup = {
      triggerHook: Scene.triggerHook(),
      element: triggerElem,
      members: [Indicator]
    };

    _ctrl._indicators.groups.push(newGroup);

    Indicator.triggerGroup = newGroup;

    _ctrl._indicators.updateTriggerGroupLabel(newGroup);

    _ctrl._indicators.updateTriggerGroupPositions(newGroup);
  };

  var removeTriggerGroup = function removeTriggerGroup() {
    _ctrl._indicators.groups.splice(_ctrl._indicators.groups.indexOf(Indicator.triggerGroup), 1);

    Indicator.triggerGroup.element.parentNode.removeChild(Indicator.triggerGroup.element);
    Indicator.triggerGroup = undefined;
  };

  var updateTriggerGroup = function updateTriggerGroup() {
    var triggerHook = Scene.triggerHook(),
        closeEnough = 0.0001;

    if (Indicator.triggerGroup) {
      if (Math.abs(Indicator.triggerGroup.triggerHook - triggerHook) < closeEnough) {
        return;
      }
    }

    var groups = _ctrl._indicators.groups,
        group,
        i = groups.length;

    while (i--) {
      group = groups[i];

      if (Math.abs(group.triggerHook - triggerHook) < closeEnough) {
        if (Indicator.triggerGroup) {
          if (Indicator.triggerGroup.members.length === 1) {
            removeTriggerGroup();
          } else {
            Indicator.triggerGroup.members.splice(Indicator.triggerGroup.members.indexOf(Indicator), 1);

            _ctrl._indicators.updateTriggerGroupLabel(Indicator.triggerGroup);

            _ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);
          }
        }

        group.members.push(Indicator);
        Indicator.triggerGroup = group;

        _ctrl._indicators.updateTriggerGroupLabel(group);

        return;
      }
    }

    if (Indicator.triggerGroup) {
      if (Indicator.triggerGroup.members.length === 1) {
        Indicator.triggerGroup.triggerHook = triggerHook;

        _ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);

        return;
      } else {
        Indicator.triggerGroup.members.splice(Indicator.triggerGroup.members.indexOf(Indicator), 1);

        _ctrl._indicators.updateTriggerGroupLabel(Indicator.triggerGroup);

        _ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);

        Indicator.triggerGroup = undefined;
      }
    }

    addTriggerGroup();
  };
};

var TPL = {
  start: function start(color) {
    var inner = document.createElement('div');
    inner.textContent = 'start';

    _util.css(inner, {
      position: 'absolute',
      overflow: 'visible',
      'border-width': 0,
      'border-style': 'solid',
      color: color,
      'border-color': color
    });

    var e = document.createElement('div');

    _util.css(e, {
      position: 'absolute',
      overflow: 'visible',
      width: 0,
      height: 0
    });

    e.appendChild(inner);
    return e;
  },
  end: function end(color) {
    var e = document.createElement('div');
    e.textContent = 'end';

    _util.css(e, {
      position: 'absolute',
      overflow: 'visible',
      'border-width': 0,
      'border-style': 'solid',
      color: color,
      'border-color': color
    });

    return e;
  },
  bounds: function bounds() {
    var e = document.createElement('div');

    _util.css(e, {
      position: 'absolute',
      overflow: 'visible',
      'white-space': 'nowrap',
      'pointer-events': 'none',
      'font-size': FONT_SIZE
    });

    e.style.zIndex = ZINDEX;
    return e;
  },
  trigger: function trigger(color) {
    var inner = document.createElement('div');
    inner.textContent = 'trigger';

    _util.css(inner, {
      position: 'relative'
    });

    var w = document.createElement('div');

    _util.css(w, {
      position: 'absolute',
      overflow: 'visible',
      'border-width': 0,
      'border-style': 'solid',
      color: color,
      'border-color': color
    });

    w.appendChild(inner);
    var e = document.createElement('div');

    _util.css(e, {
      position: 'fixed',
      overflow: 'visible',
      'white-space': 'nowrap',
      'pointer-events': 'none',
      'font-size': FONT_SIZE
    });

    e.style.zIndex = ZINDEX;
    e.appendChild(w);
    return e;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wbHVnaW5zL2RlYnVnLmFkZEluZGljYXRvcnMuanMiXSwibmFtZXMiOlsiTkFNRVNQQUNFIiwiY29uc29sZSIsIndpbmRvdyIsImVyciIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImNhbGwiLCJlcnJvciIsImxvZyIsIlNjcm9sbE1hZ2ljIiwiRk9OVF9TSVpFIiwiWklOREVYIiwiRURHRV9PRkZTRVQiLCJfdXRpbCIsIl9hdXRvaW5kZXgiLCJTY2VuZSIsImV4dGVuZCIsIl9pbmRpY2F0b3IiLCJfbG9nIiwiQXJyYXkiLCJzcGxpY2UiLCJhcmd1bWVudHMiLCJhcHBseSIsImFkZEluZGljYXRvcnMiLCJvcHRpb25zIiwiREVGQVVMVF9PUFRJT05TIiwibmFtZSIsImluZGVudCIsInBhcmVudCIsInVuZGVmaW5lZCIsImNvbG9yU3RhcnQiLCJjb2xvckVuZCIsImNvbG9yVHJpZ2dlciIsIkluZGljYXRvciIsIm9uIiwiYWRkIiwicmVtb3ZlIiwicmVtb3ZlSW5kaWNhdG9ycyIsImNvbnRyb2xsZXIiLCJvZmYiLCJDb250cm9sbGVyIiwiYWRkT3B0aW9uIiwiX2luZm8iLCJpbmZvIiwiX2NvbnRhaW5lciIsImNvbnRhaW5lciIsIl9pc0RvY3VtZW50IiwiaXNEb2N1bWVudCIsIl92ZXJ0aWNhbCIsInZlcnRpY2FsIiwiX2luZGljYXRvcnMiLCJncm91cHMiLCJoYW5kbGVCb3VuZHNQb3NpdGlvbkNoYW5nZSIsInVwZGF0ZUJvdW5kc1Bvc2l0aW9ucyIsImhhbmRsZVRyaWdnZXJQb3NpdGlvbkNoYW5nZSIsInVwZGF0ZVRyaWdnZXJHcm91cFBvc2l0aW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcGVjaWZpY0luZGljYXRvciIsInRyaWdnZXJHcm91cCIsIm1lbWJlcnMiLCJnIiwibGVuZ3RoIiwiY3NzIiwicGFyYW1Qb3MiLCJwYXJhbURpbWVuc2lvbiIsImVkZ2UiLCJnZXQiLCJzY3JvbGxMZWZ0Iiwid2lkdGgiLCJzY3JvbGxUb3AiLCJoZWlnaHQiLCJiIiwidHJpZ2dlclNpemUiLCJncm91cCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwiYm91bmRzIiwic3BlY2lmaWNHcm91cCIsImkiLCJkb2N1bWVudCIsImJvZHkiLCJjb250YWluZXJPZmZzZXQiLCJ0b3AiLCJsZWZ0Iiwib2Zmc2V0IiwicGFyYW1UcmFuc2Zvcm0iLCJlbGVtIiwicG9zIiwiZWxlbVNpemUiLCJ0cmFuc2Zvcm0iLCJ0cmlnZ2VySG9vayIsInVwZGF0ZVRyaWdnZXJHcm91cExhYmVsIiwidGV4dCIsImRvVXBkYXRlIiwidGV4dENvbnRlbnQiLCJhZGRTY2VuZSIsIm5ld1NjZW5lIiwiX29wdGlvbnMiLCIkc3VwZXIiLCJkZXN0cm95IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9lbGVtQm91bmRzIiwiVFBMIiwiX2VsZW1TdGFydCIsInN0YXJ0IiwiX2VsZW1FbmQiLCJlbmQiLCJfYm91bmRzQ29udGFpbmVyIiwiZWxlbWVudHMiLCJfY3RybCIsImFwcGVuZENoaWxkIiwicG9zaXRpb24iLCJoYW5kbGVUcmlnZ2VyUGFyYW1zQ2hhbmdlIiwiaGFuZGxlQm91bmRzUGFyYW1zQ2hhbmdlIiwidXBkYXRlVHJpZ2dlckdyb3VwIiwidXBkYXRlQm91bmRzIiwic2V0VGltZW91dCIsImluZGV4T2YiLCJyZW1vdmVUcmlnZ2VyR3JvdXAiLCJyZW1vdmVCb3VuZHMiLCJlIiwid2hhdCIsImFkZEJvdW5kcyIsInYiLCJib3R0b20iLCJyaWdodCIsInBhZGRpbmciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJ0cmlnZ2VyUG9zaXRpb24iLCJkdXJhdGlvbiIsImRpc3BsYXkiLCJhZGRUcmlnZ2VyR3JvdXAiLCJ0cmlnZ2VyRWxlbSIsInRyaWdnZXIiLCJuZXdHcm91cCIsInB1c2giLCJjbG9zZUVub3VnaCIsIk1hdGgiLCJhYnMiLCJjb2xvciIsImlubmVyIiwiY3JlYXRlRWxlbWVudCIsIm92ZXJmbG93Iiwic3R5bGUiLCJ6SW5kZXgiLCJ3Il0sIm1h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LEtBQWQ7QUFFQSxRQUFJckIsQ0FBQyxHQUFHekMsUUFBUSxDQUFDK0QsYUFBVCxDQUF1QixLQUF2QixDQUFSOztBQUNBakksSUFBQUEsS0FBSyxDQUFDaUQsR0FBTixDQUFVMEQsQ0FBVixFQUFhO0FBQ1hULE1BQUFBLFFBQVEsRUFBRSxPQURDO0FBRVhnQyxNQUFBQSxRQUFRLEVBQUUsU0FGQztBQUdYLHFCQUFlLFFBSEo7QUFJWCx3QkFBa0IsTUFKUDtBQUtYLG1CQUFhckk7QUFMRixLQUFiOztBQU9BOEcsSUFBQUEsQ0FBQyxDQUFDd0IsS0FBRixDQUFRQyxNQUFSLEdBQWlCdEksTUFBakI7QUFDQTZHLElBQUFBLENBQUMsQ0FBQ1YsV0FBRixDQUFjb0MsQ0FBZDtBQUNBLFdBQU8xQixDQUFQO0FBQ0Q7QUEvRU8sQ0FBViIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlICovXHJcbi8qIHByZXR0aWVyLWlnbm9yZSAqL1xyXG5cclxuLypcclxuU2xpZ2h0bHkgbW9kaWZpZWQgdmVyc2lvbiBvZiB0aGlzOiBodHRwczovL2dpdGh1Yi5jb20vamFucGFlcGtlL1Njcm9sbE1hZ2ljL2Jsb2IvbWFzdGVyL2Rldi9zcmMvcGx1Z2lucy9kZWJ1Zy5hZGRJbmRpY2F0b3JzLmpzXHJcbiovXHJcblxyXG5pbXBvcnQgU2Nyb2xsTWFnaWMgZnJvbSAnLi4vc2Nyb2xsbWFnaWMtd2l0aC1zc3InXHJcblxyXG52YXIgTkFNRVNQQUNFID0gJ2RlYnVnLmFkZEluZGljYXRvcnMnXHJcblxyXG52YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlIHx8IHt9LFxyXG4gIGVyciA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvciB8fCBjb25zb2xlLmxvZyB8fCBmdW5jdGlvbigpIHt9LCBjb25zb2xlKVxyXG5pZiAoIVNjcm9sbE1hZ2ljKSB7XHJcbiAgZXJyKFxyXG4gICAgJygnICtcclxuICAgICAgTkFNRVNQQUNFICtcclxuICAgICAgXCIpIC0+IEVSUk9SOiBUaGUgU2Nyb2xsTWFnaWMgbWFpbiBtb2R1bGUgY291bGQgbm90IGJlIGZvdW5kLiBQbGVhc2UgbWFrZSBzdXJlIGl0J3MgbG9hZGVkIGJlZm9yZSB0aGlzIHBsdWdpbiBvciB1c2UgYW4gYXN5bmNocm9ub3VzIGxvYWRlciBsaWtlIHJlcXVpcmVqcy5cIixcclxuICApXHJcbn1cclxuXHJcbi8vIHBsdWdpbiBzZXR0aW5nc1xyXG52YXIgRk9OVF9TSVpFID0gJzAuODVlbScsXHJcbiAgWklOREVYID0gJzk5OTknLFxyXG4gIEVER0VfT0ZGU0VUID0gMTUgLy8gbWluaW11bSBlZGdlIGRpc3RhbmNlLCBhZGRlZCB0byBpbmRlbnRhdGlvblxyXG5cclxuLy8gb3ZlcmFsbCB2YXJzXHJcbnZhciBfdXRpbCA9IFNjcm9sbE1hZ2ljLl91dGlsLFxyXG4gIF9hdXRvaW5kZXggPSAwXHJcblxyXG5TY3JvbGxNYWdpYy5TY2VuZS5leHRlbmQoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIFNjZW5lID0gdGhpcyxcclxuICAgIF9pbmRpY2F0b3JcclxuXHJcbiAgdmFyIGxvZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKFNjZW5lLl9sb2cpIHtcclxuICAgICAgLy8gbm90IGF2YWlsYWJsZSwgd2hlbiBtYWluIHNvdXJjZSBtaW5pZmllZFxyXG4gICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLCAxLCAwLCAnKCcgKyBOQU1FU1BBQ0UgKyAnKScsICctPicpXHJcbiAgICAgIFNjZW5lLl9sb2cuYXBwbHkodGhpcywgYXJndW1lbnRzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcblx0XHQgKiBBZGQgdmlzdWFsIGluZGljYXRvcnMgZm9yIGEgU2Nyb2xsTWFnaWMuU2NlbmUuICBcclxuXHRcdCAqIEBtZW1iZXJvZiEgZGVidWcuYWRkSW5kaWNhdG9ycyNcclxuXHRcdCAqXHJcblx0XHQgKiBAZXhhbXBsZVxyXG5cdFx0ICogLy8gYWRkIGJhc2ljIGluZGljYXRvcnNcclxuXHRcdCAqIHNjZW5lLmFkZEluZGljYXRvcnMoKVxyXG5cdFx0ICpcclxuXHRcdCAqIC8vIHBhc3Npbmcgb3B0aW9uc1xyXG5cdFx0ICogc2NlbmUuYWRkSW5kaWNhdG9ycyh7bmFtZTogXCJwaW4gc2NlbmVcIiwgY29sb3JFbmQ6IFwiI0ZGRkZGRlwifSk7XHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIEFuIG9iamVjdCBjb250YWluaW5nIG9uZSBvciBtb3JlIG9wdGlvbnMgZm9yIHRoZSBpbmRpY2F0b3JzLlxyXG5cdFx0ICogQHBhcmFtIHsoc3RyaW5nfG9iamVjdCl9IFtvcHRpb25zLnBhcmVudF0gLSBBIHNlbGVjdG9yLCBET00gT2JqZWN0IG9yIGEgalF1ZXJ5IG9iamVjdCB0aGF0IHRoZSBpbmRpY2F0b3JzIHNob3VsZCBiZSBhZGRlZCB0by4gIFxyXG5cdFx0IFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCBJZiB1bmRlZmluZWQsIHRoZSBjb250cm9sbGVyJ3MgY29udGFpbmVyIHdpbGwgYmUgdXNlZC5cclxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5uYW1lPVwiXCJdIC0gVGhpcyBzdHJpbmcgd2lsbCBiZSBkaXNwbGF5ZWQgYXQgdGhlIHN0YXJ0IGFuZCBlbmQgaW5kaWNhdG9ycyBvZiB0aGUgc2NlbmUgZm9yIGlkZW50aWZpY2F0aW9uIHB1cnBvc2VzLiBJZiBubyBuYW1lIGlzIHN1cHBsaWVkIGFuIGF1dG9tYXRpYyBpbmRleCB3aWxsIGJlIHVzZWQuXHJcblx0XHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaW5kZW50PTBdIC0gQWRkaXRpb25hbCBwb3NpdGlvbiBvZmZzZXQgZm9yIHRoZSBpbmRpY2F0b3JzICh1c2VmdWwsIHdoZW4gaGF2aW5nIG11bHRpcGxlIHNjZW5lcyBzdGFydGluZyBhdCB0aGUgc2FtZSBwb3NpdGlvbikuXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29sb3JTdGFydD1ncmVlbl0gLSBDU1MgY29sb3IgZGVmaW5pdGlvbiBmb3IgdGhlIHN0YXJ0IGluZGljYXRvci5cclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb2xvckVuZD1yZWRdIC0gQ1NTIGNvbG9yIGRlZmluaXRpb24gZm9yIHRoZSBlbmQgaW5kaWNhdG9yLlxyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNvbG9yVHJpZ2dlcj1ibHVlXSAtIENTUyBjb2xvciBkZWZpbml0aW9uIGZvciB0aGUgdHJpZ2dlciBpbmRpY2F0b3IuXHJcblx0XHQgKi9cclxuICBTY2VuZS5hZGRJbmRpY2F0b3JzID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgaWYgKCFfaW5kaWNhdG9yKSB7XHJcbiAgICAgIHZhciBERUZBVUxUX09QVElPTlMgPSB7XHJcbiAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgaW5kZW50OiAwLFxyXG4gICAgICAgIHBhcmVudDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGNvbG9yU3RhcnQ6ICdncmVlbicsXHJcbiAgICAgICAgY29sb3JFbmQ6ICdyZWQnLFxyXG4gICAgICAgIGNvbG9yVHJpZ2dlcjogJ2JsdWUnLFxyXG4gICAgICB9XHJcblxyXG4gICAgICBvcHRpb25zID0gX3V0aWwuZXh0ZW5kKHt9LCBERUZBVUxUX09QVElPTlMsIG9wdGlvbnMpXHJcblxyXG4gICAgICBfYXV0b2luZGV4KytcclxuICAgICAgX2luZGljYXRvciA9IG5ldyBJbmRpY2F0b3IoU2NlbmUsIG9wdGlvbnMpXHJcblxyXG4gICAgICBTY2VuZS5vbignYWRkLnBsdWdpbl9hZGRJbmRpY2F0b3JzJywgX2luZGljYXRvci5hZGQpXHJcbiAgICAgIFNjZW5lLm9uKCdyZW1vdmUucGx1Z2luX2FkZEluZGljYXRvcnMnLCBfaW5kaWNhdG9yLnJlbW92ZSlcclxuICAgICAgU2NlbmUub24oJ2Rlc3Ryb3kucGx1Z2luX2FkZEluZGljYXRvcnMnLCBTY2VuZS5yZW1vdmVJbmRpY2F0b3JzKVxyXG5cclxuICAgICAgLy8gaXQgdGhlIHNjZW5lIGFscmVhZHkgaGFzIGEgY29udHJvbGxlciB3ZSBjYW4gc3RhcnQgcmlnaHQgYXdheS5cclxuICAgICAgaWYgKFNjZW5lLmNvbnRyb2xsZXIoKSkge1xyXG4gICAgICAgIF9pbmRpY2F0b3IuYWRkKClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFNjZW5lXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHZpc3VhbCBpbmRpY2F0b3JzIGZyb20gYSBTY3JvbGxNYWdpYy5TY2VuZS5cclxuICAgKiBAbWVtYmVyb2YhIGRlYnVnLmFkZEluZGljYXRvcnMjXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIHJlbW92ZSBwcmV2aW91c2x5IGFkZGVkIGluZGljYXRvcnNcclxuICAgKiBzY2VuZS5yZW1vdmVJbmRpY2F0b3JzKClcclxuICAgKlxyXG4gICAqL1xyXG4gIFNjZW5lLnJlbW92ZUluZGljYXRvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChfaW5kaWNhdG9yKSB7XHJcbiAgICAgIF9pbmRpY2F0b3IucmVtb3ZlKClcclxuICAgICAgdGhpcy5vZmYoJyoucGx1Z2luX2FkZEluZGljYXRvcnMnKVxyXG4gICAgICBfaW5kaWNhdG9yID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICByZXR1cm4gU2NlbmVcclxuICB9XHJcbn0pXHJcblxyXG4vKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqIEV4dGVuc2lvbiBmb3IgY29udHJvbGxlciB0byBzdG9yZSBhbmQgdXBkYXRlIHJlbGF0ZWQgaW5kaWNhdG9yc1xyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqL1xyXG4vLyBhZGQgb3B0aW9uIHRvIGdsb2JhbGx5IGF1dG8tYWRkIGluZGljYXRvcnMgdG8gc2NlbmVzXHJcbi8qKlxyXG4gKiBFdmVyeSBTY3JvbGxNYWdpYy5Db250cm9sbGVyIGluc3RhbmNlIG5vdyBhY2NlcHRzIGFuIGFkZGl0aW9uYWwgb3B0aW9uLlxyXG4gKiBTZWUge0BsaW5rIFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXJ9IGZvciBhIGNvbXBsZXRlIGxpc3Qgb2YgdGhlIHN0YW5kYXJkIG9wdGlvbnMuXHJcbiAqIEBtZW1iZXJvZiEgZGVidWcuYWRkSW5kaWNhdG9ycyNcclxuICogQG1ldGhvZCBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcihvcHRpb25zKVxyXG4gKiBAZXhhbXBsZVxyXG4gKiAvLyBtYWtlIGEgY29udHJvbGxlciBhbmQgYWRkIGluZGljYXRvcnMgdG8gYWxsIHNjZW5lcyBhdHRhY2hlZFxyXG4gKiB2YXIgY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKHthZGRJbmRpY2F0b3JzOiB0cnVlfSk7XHJcbiAqIC8vIHRoaXMgc2NlbmUgd2lsbCBhdXRvbWF0aWNhbGx5IGhhdmUgaW5kaWNhdG9ycyBhZGRlZCB0byBpdFxyXG4gKiBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoKVxyXG4gKiAgICAgICAgICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIGZvciB0aGUgQ29udHJvbGxlci5cclxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hZGRJbmRpY2F0b3JzPWZhbHNlXSAtIElmIHNldCB0byBgdHJ1ZWAgZXZlcnkgc2NlbmUgdGhhdCBpcyBhZGRlZCB0byB0aGUgY29udHJvbGxlciB3aWxsIGF1dG9tYXRpY2FsbHkgZ2V0IGluZGljYXRvcnMgYWRkZWQgdG8gaXQuXHJcbiAqL1xyXG5TY3JvbGxNYWdpYy5Db250cm9sbGVyLmFkZE9wdGlvbignYWRkSW5kaWNhdG9ycycsIGZhbHNlKVxyXG4vLyBleHRlbmQgQ29udHJvbGxlclxyXG5TY3JvbGxNYWdpYy5Db250cm9sbGVyLmV4dGVuZChmdW5jdGlvbigpIHtcclxuICB2YXIgQ29udHJvbGxlciA9IHRoaXMsXHJcbiAgICBfaW5mbyA9IENvbnRyb2xsZXIuaW5mbygpLFxyXG4gICAgX2NvbnRhaW5lciA9IF9pbmZvLmNvbnRhaW5lcixcclxuICAgIF9pc0RvY3VtZW50ID0gX2luZm8uaXNEb2N1bWVudCxcclxuICAgIF92ZXJ0aWNhbCA9IF9pbmZvLnZlcnRpY2FsLFxyXG4gICAgX2luZGljYXRvcnMgPSB7XHJcbiAgICAgIC8vIGNvbnRhaW5lciBmb3IgYWxsIGluZGljYXRvcnMgYW5kIG1ldGhvZHNcclxuICAgICAgZ3JvdXBzOiBbXSxcclxuICAgIH1cclxuXHJcbiAgdmFyIGxvZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKENvbnRyb2xsZXIuX2xvZykge1xyXG4gICAgICAvLyBub3QgYXZhaWxhYmxlLCB3aGVuIG1haW4gc291cmNlIG1pbmlmaWVkXHJcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDEsIDAsICcoJyArIE5BTUVTUEFDRSArICcpJywgJy0+JylcclxuICAgICAgQ29udHJvbGxlci5fbG9nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKENvbnRyb2xsZXIuX2luZGljYXRvcnMpIHtcclxuICAgIGxvZygyLCBcIldBUk5JTkc6IFNjZW5lIGFscmVhZHkgaGFzIGEgcHJvcGVydHkgJ19pbmRpY2F0b3JzJywgd2hpY2ggd2lsbCBiZSBvdmVyd3JpdHRlbiBieSBwbHVnaW4uXCIpXHJcbiAgfVxyXG5cclxuICAvLyBhZGQgaW5kaWNhdG9ycyBjb250YWluZXJcclxuICB0aGlzLl9pbmRpY2F0b3JzID0gX2luZGljYXRvcnNcclxuICAvKlxyXG5cdFx0XHRuZWVkZWQgdXBkYXRlczpcclxuXHRcdFx0KysrKysrKysrKysrKysrXHJcblx0XHRcdHN0YXJ0L2VuZCBwb3NpdGlvbiBvbiBzY2VuZSBzaGlmdCAoaGFuZGxlZCBpbiBJbmRpY2F0b3IgY2xhc3MpXHJcblx0XHRcdHRyaWdnZXIgcGFyYW1ldGVycyBvbiB0cmlnZ2VySG9vayB2YWx1ZSBjaGFuZ2UgKGhhbmRsZWQgaW4gSW5kaWNhdG9yIGNsYXNzKVxyXG5cdFx0XHRib3VuZHMgcG9zaXRpb24gb24gY29udGFpbmVyIHNjcm9sbCBvciByZXNpemUgKHRvIGtlZXAgYWxpZ25tZW50IHRvIGJvdHRvbS9yaWdodClcclxuXHRcdFx0dHJpZ2dlciBwb3NpdGlvbiBvbiBjb250YWluZXIgcmVzaXplLCB3aW5kb3cgcmVzaXplIChpZiBjb250YWluZXIgaXNuJ3QgZG9jdW1lbnQpIGFuZCB3aW5kb3cgc2Nyb2xsIChpZiBjb250YWluZXIgaXNuJ3QgZG9jdW1lbnQpXHJcblx0XHQqL1xyXG5cclxuICAvLyBldmVudCBoYW5kbGVyIGZvciB3aGVuIGFzc29jaWF0ZWQgYm91bmRzIG1hcmtlcnMgbmVlZCB0byBiZSByZXBvc2l0aW9uZWRcclxuICB2YXIgaGFuZGxlQm91bmRzUG9zaXRpb25DaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIF9pbmRpY2F0b3JzLnVwZGF0ZUJvdW5kc1Bvc2l0aW9ucygpXHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBoYW5kbGVyIGZvciB3aGVuIGFzc29jaWF0ZWQgdHJpZ2dlciBncm91cHMgbmVlZCB0byBiZSByZXBvc2l0aW9uZWRcclxuICB2YXIgaGFuZGxlVHJpZ2dlclBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfaW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBQb3NpdGlvbnMoKVxyXG4gIH1cclxuXHJcbiAgX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVUcmlnZ2VyUG9zaXRpb25DaGFuZ2UpXHJcbiAgaWYgKCFfaXNEb2N1bWVudCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVRyaWdnZXJQb3NpdGlvbkNoYW5nZSlcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVUcmlnZ2VyUG9zaXRpb25DaGFuZ2UpXHJcbiAgfVxyXG4gIC8vIHVwZGF0ZSBhbGwgcmVsYXRlZCBib3VuZHMgY29udGFpbmVyc1xyXG4gIF9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlQm91bmRzUG9zaXRpb25DaGFuZ2UpXHJcbiAgX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVCb3VuZHNQb3NpdGlvbkNoYW5nZSlcclxuXHJcbiAgLy8gdXBkYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGJvdW5kcyBjb250YWluZXIgdG8gYWxpZ25lZCB0byB0aGUgcmlnaHQgZm9yIHZlcnRpY2FsIGNvbnRhaW5lcnMgYW5kIHRvIHRoZSBib3R0b20gZm9yIGhvcml6b250YWxcclxuICB0aGlzLl9pbmRpY2F0b3JzLnVwZGF0ZUJvdW5kc1Bvc2l0aW9ucyA9IGZ1bmN0aW9uKHNwZWNpZmljSW5kaWNhdG9yKSB7XHJcbiAgICB2YXIgLy8gY29uc3RhbnQgZm9yIGFsbCBib3VuZHNcclxuICAgICAgZ3JvdXBzID0gc3BlY2lmaWNJbmRpY2F0b3JcclxuICAgICAgICA/IFtcclxuICAgICAgICAgICAgX3V0aWwuZXh0ZW5kKHt9LCBzcGVjaWZpY0luZGljYXRvci50cmlnZ2VyR3JvdXAsIHtcclxuICAgICAgICAgICAgICBtZW1iZXJzOiBbc3BlY2lmaWNJbmRpY2F0b3JdLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0gLy8gY3JlYXRlIGEgZ3JvdXAgd2l0aCBvbmx5IG9uZSBlbGVtZW50XHJcbiAgICAgICAgOiBfaW5kaWNhdG9ycy5ncm91cHMsIC8vIHVzZSBhbGxcclxuICAgICAgZyA9IGdyb3Vwcy5sZW5ndGgsXHJcbiAgICAgIGNzcyA9IHt9LFxyXG4gICAgICBwYXJhbVBvcyA9IF92ZXJ0aWNhbCA/ICdsZWZ0JyA6ICd0b3AnLFxyXG4gICAgICBwYXJhbURpbWVuc2lvbiA9IF92ZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JyxcclxuICAgICAgZWRnZSA9IF92ZXJ0aWNhbFxyXG4gICAgICAgID8gX3V0aWwuZ2V0LnNjcm9sbExlZnQoX2NvbnRhaW5lcikgKyBfdXRpbC5nZXQud2lkdGgoX2NvbnRhaW5lcikgLSBFREdFX09GRlNFVFxyXG4gICAgICAgIDogX3V0aWwuZ2V0LnNjcm9sbFRvcChfY29udGFpbmVyKSArIF91dGlsLmdldC5oZWlnaHQoX2NvbnRhaW5lcikgLSBFREdFX09GRlNFVCxcclxuICAgICAgYixcclxuICAgICAgdHJpZ2dlclNpemUsXHJcbiAgICAgIGdyb3VwXHJcbiAgICB3aGlsZSAoZy0tKSB7XHJcbiAgICAgIC8vIGdyb3VwIGxvb3BcclxuICAgICAgZ3JvdXAgPSBncm91cHNbZ11cclxuICAgICAgYiA9IGdyb3VwLm1lbWJlcnMubGVuZ3RoXHJcbiAgICAgIHRyaWdnZXJTaXplID0gX3V0aWwuZ2V0W3BhcmFtRGltZW5zaW9uXShncm91cC5lbGVtZW50LmZpcnN0Q2hpbGQpXHJcbiAgICAgIHdoaWxlIChiLS0pIHtcclxuICAgICAgICAvLyBpbmRpY2F0b3JzIGxvb3BcclxuICAgICAgICBjc3NbcGFyYW1Qb3NdID0gZWRnZSAtIHRyaWdnZXJTaXplXHJcbiAgICAgICAgX3V0aWwuY3NzKGdyb3VwLm1lbWJlcnNbYl0uYm91bmRzLCBjc3MpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHVwZGF0ZXMgdGhlIHBvc2l0aW9ucyBvZiBhbGwgdHJpZ2dlciBncm91cHMgYXR0YWNoZWQgdG8gYSBjb250cm9sbGVyIG9yIGEgc3BlY2lmaWMgb25lLCBpZiBwcm92aWRlZFxyXG4gIHRoaXMuX2luZGljYXRvcnMudXBkYXRlVHJpZ2dlckdyb3VwUG9zaXRpb25zID0gZnVuY3Rpb24oc3BlY2lmaWNHcm91cCkge1xyXG4gICAgdmFyIC8vIGNvbnN0YW50IHZhcnNcclxuICAgICAgZ3JvdXBzID0gc3BlY2lmaWNHcm91cCA/IFtzcGVjaWZpY0dyb3VwXSA6IF9pbmRpY2F0b3JzLmdyb3VwcyxcclxuICAgICAgaSA9IGdyb3Vwcy5sZW5ndGgsXHJcbiAgICAgIGNvbnRhaW5lciA9IF9pc0RvY3VtZW50ID8gZG9jdW1lbnQuYm9keSA6IF9jb250YWluZXIsXHJcbiAgICAgIGNvbnRhaW5lck9mZnNldCA9IF9pc0RvY3VtZW50XHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgIH1cclxuICAgICAgICA6IF91dGlsLmdldC5vZmZzZXQoY29udGFpbmVyLCB0cnVlKSxcclxuICAgICAgZWRnZSA9IF92ZXJ0aWNhbCA/IF91dGlsLmdldC53aWR0aChfY29udGFpbmVyKSAtIEVER0VfT0ZGU0VUIDogX3V0aWwuZ2V0LmhlaWdodChfY29udGFpbmVyKSAtIEVER0VfT0ZGU0VULFxyXG4gICAgICBwYXJhbURpbWVuc2lvbiA9IF92ZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JyxcclxuICAgICAgcGFyYW1UcmFuc2Zvcm0gPSBfdmVydGljYWwgPyAnWScgOiAnWCdcclxuICAgIHZhciAvLyBjaGFuZ2luZyB2YXJzXHJcbiAgICAgIGdyb3VwLFxyXG4gICAgICBlbGVtLFxyXG4gICAgICBwb3MsXHJcbiAgICAgIGVsZW1TaXplLFxyXG4gICAgICB0cmFuc2Zvcm1cclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgZ3JvdXAgPSBncm91cHNbaV1cclxuICAgICAgZWxlbSA9IGdyb3VwLmVsZW1lbnRcclxuICAgICAgcG9zID0gZ3JvdXAudHJpZ2dlckhvb2sgKiBDb250cm9sbGVyLmluZm8oJ3NpemUnKVxyXG4gICAgICBlbGVtU2l6ZSA9IF91dGlsLmdldFtwYXJhbURpbWVuc2lvbl0oZWxlbS5maXJzdENoaWxkLmZpcnN0Q2hpbGQpXHJcbiAgICAgIHRyYW5zZm9ybSA9IHBvcyA+IGVsZW1TaXplID8gJ3RyYW5zbGF0ZScgKyBwYXJhbVRyYW5zZm9ybSArICcoLTEwMCUpJyA6ICcnXHJcblxyXG4gICAgICBfdXRpbC5jc3MoZWxlbSwge1xyXG4gICAgICAgIHRvcDogY29udGFpbmVyT2Zmc2V0LnRvcCArIChfdmVydGljYWwgPyBwb3MgOiBlZGdlIC0gZ3JvdXAubWVtYmVyc1swXS5vcHRpb25zLmluZGVudCksXHJcbiAgICAgICAgbGVmdDogY29udGFpbmVyT2Zmc2V0LmxlZnQgKyAoX3ZlcnRpY2FsID8gZWRnZSAtIGdyb3VwLm1lbWJlcnNbMF0ub3B0aW9ucy5pbmRlbnQgOiBwb3MpLFxyXG4gICAgICB9KVxyXG4gICAgICBfdXRpbC5jc3MoZWxlbS5maXJzdENoaWxkLmZpcnN0Q2hpbGQsIHtcclxuICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHRyYW5zZm9ybSxcclxuICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiB0cmFuc2Zvcm0sXHJcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB1cGRhdGVzIHRoZSBsYWJlbCBmb3IgdGhlIGdyb3VwIHRvIGNvbnRhaW4gdGhlIG5hbWUsIGlmIGl0IG9ubHkgaGFzIG9uZSBtZW1iZXJcclxuICB0aGlzLl9pbmRpY2F0b3JzLnVwZGF0ZVRyaWdnZXJHcm91cExhYmVsID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgIHZhciB0ZXh0ID0gJ3RyaWdnZXInICsgKGdyb3VwLm1lbWJlcnMubGVuZ3RoID4gMSA/ICcnIDogJyAnICsgZ3JvdXAubWVtYmVyc1swXS5vcHRpb25zLm5hbWUpLFxyXG4gICAgICBlbGVtID0gZ3JvdXAuZWxlbWVudC5maXJzdENoaWxkLmZpcnN0Q2hpbGQsXHJcbiAgICAgIGRvVXBkYXRlID0gZWxlbS50ZXh0Q29udGVudCAhPT0gdGV4dFxyXG4gICAgaWYgKGRvVXBkYXRlKSB7XHJcbiAgICAgIGVsZW0udGV4dENvbnRlbnQgPSB0ZXh0XHJcbiAgICAgIGlmIChfdmVydGljYWwpIHtcclxuICAgICAgICAvLyBib3VuZHMgcG9zaXRpb24gaXMgZGVwZW5kZW50IG9uIHRleHQgbGVuZ3RoLCBzbyB1cGRhdGVcclxuICAgICAgICBfaW5kaWNhdG9ycy51cGRhdGVCb3VuZHNQb3NpdGlvbnMoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBhZGQgaW5kaWNhdG9ycyBpZiBnbG9iYWwgb3B0aW9uIGlzIHNldFxyXG4gIHRoaXMuYWRkU2NlbmUgPSBmdW5jdGlvbihuZXdTY2VuZSkge1xyXG4gICAgaWYgKHRoaXMuX29wdGlvbnMuYWRkSW5kaWNhdG9ycyAmJiBuZXdTY2VuZSBpbnN0YW5jZW9mIFNjcm9sbE1hZ2ljLlNjZW5lICYmIG5ld1NjZW5lLmNvbnRyb2xsZXIoKSA9PT0gQ29udHJvbGxlcikge1xyXG4gICAgICBuZXdTY2VuZS5hZGRJbmRpY2F0b3JzKClcclxuICAgIH1cclxuICAgIC8vIGNhbGwgb3JpZ2luYWwgZGVzdHJveSBtZXRob2RcclxuICAgIHRoaXMuJHN1cGVyLmFkZFNjZW5lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBhbGwgcHJldmlvdXNseSBzZXQgbGlzdGVuZXJzIG9uIGRlc3Ryb3lcclxuICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgIF9jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlVHJpZ2dlclBvc2l0aW9uQ2hhbmdlKVxyXG4gICAgaWYgKCFfaXNEb2N1bWVudCkge1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlVHJpZ2dlclBvc2l0aW9uQ2hhbmdlKVxyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlVHJpZ2dlclBvc2l0aW9uQ2hhbmdlKVxyXG4gICAgfVxyXG4gICAgX2NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVCb3VuZHNQb3NpdGlvbkNoYW5nZSlcclxuICAgIF9jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlQm91bmRzUG9zaXRpb25DaGFuZ2UpXHJcbiAgICAvLyBjYWxsIG9yaWdpbmFsIGRlc3Ryb3kgbWV0aG9kXHJcbiAgICB0aGlzLiRzdXBlci5kZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcclxuICB9XHJcbiAgcmV0dXJuIENvbnRyb2xsZXJcclxufSlcclxuXHJcbi8qXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogSW50ZXJuYWwgY2xhc3MgZm9yIHRoZSBjb25zdHJ1Y3Rpb24gb2YgSW5kaWNhdG9yc1xyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqL1xyXG52YXIgSW5kaWNhdG9yID0gZnVuY3Rpb24oU2NlbmUsIG9wdGlvbnMpIHtcclxuICB2YXIgSW5kaWNhdG9yID0gdGhpcyxcclxuICAgIF9lbGVtQm91bmRzID0gVFBMLmJvdW5kcygpLFxyXG4gICAgX2VsZW1TdGFydCA9IFRQTC5zdGFydChvcHRpb25zLmNvbG9yU3RhcnQpLFxyXG4gICAgX2VsZW1FbmQgPSBUUEwuZW5kKG9wdGlvbnMuY29sb3JFbmQpLFxyXG4gICAgX2JvdW5kc0NvbnRhaW5lciA9IG9wdGlvbnMucGFyZW50ICYmIF91dGlsLmdldC5lbGVtZW50cyhvcHRpb25zLnBhcmVudClbMF0sXHJcbiAgICBfdmVydGljYWwsXHJcbiAgICBfY3RybFxyXG5cclxuICB2YXIgbG9nID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoU2NlbmUuX2xvZykge1xyXG4gICAgICAvLyBub3QgYXZhaWxhYmxlLCB3aGVuIG1haW4gc291cmNlIG1pbmlmaWVkXHJcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDEsIDAsICcoJyArIE5BTUVTUEFDRSArICcpJywgJy0+JylcclxuICAgICAgU2NlbmUuX2xvZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcHRpb25zLm5hbWUgPSBvcHRpb25zLm5hbWUgfHwgX2F1dG9pbmRleFxyXG5cclxuICAvLyBwcmVwYXJlIGJvdW5kcyBlbGVtZW50c1xyXG4gIF9lbGVtU3RhcnQuZmlyc3RDaGlsZC50ZXh0Q29udGVudCArPSAnICcgKyBvcHRpb25zLm5hbWVcclxuICBfZWxlbUVuZC50ZXh0Q29udGVudCArPSAnICcgKyBvcHRpb25zLm5hbWVcclxuICBfZWxlbUJvdW5kcy5hcHBlbmRDaGlsZChfZWxlbVN0YXJ0KVxyXG4gIF9lbGVtQm91bmRzLmFwcGVuZENoaWxkKF9lbGVtRW5kKVxyXG5cclxuICAvLyBzZXQgcHVibGljIHZhcmlhYmxlc1xyXG4gIEluZGljYXRvci5vcHRpb25zID0gb3B0aW9uc1xyXG4gIEluZGljYXRvci5ib3VuZHMgPSBfZWxlbUJvdW5kc1xyXG4gIC8vIHdpbGwgYmUgc2V0IGxhdGVyXHJcbiAgSW5kaWNhdG9yLnRyaWdnZXJHcm91cCA9IHVuZGVmaW5lZFxyXG5cclxuICAvLyBhZGQgaW5kaWNhdG9ycyB0byBET01cclxuICB0aGlzLmFkZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX2N0cmwgPSBTY2VuZS5jb250cm9sbGVyKClcclxuICAgIF92ZXJ0aWNhbCA9IF9jdHJsLmluZm8oJ3ZlcnRpY2FsJylcclxuXHJcbiAgICB2YXIgaXNEb2N1bWVudCA9IF9jdHJsLmluZm8oJ2lzRG9jdW1lbnQnKVxyXG5cclxuICAgIGlmICghX2JvdW5kc0NvbnRhaW5lcikge1xyXG4gICAgICAvLyBubyBwYXJlbnQgc3VwcGxpZWQgb3IgZG9lc250IGV4aXN0XHJcbiAgICAgIF9ib3VuZHNDb250YWluZXIgPSBpc0RvY3VtZW50ID8gZG9jdW1lbnQuYm9keSA6IF9jdHJsLmluZm8oJ2NvbnRhaW5lcicpIC8vIGNoZWNrIGlmIHdpbmRvdy9kb2N1bWVudCAodGhlbiB1c2UgYm9keSlcclxuICAgIH1cclxuICAgIGlmICghaXNEb2N1bWVudCAmJiBfdXRpbC5jc3MoX2JvdW5kc0NvbnRhaW5lciwgJ3Bvc2l0aW9uJykgPT09ICdzdGF0aWMnKSB7XHJcbiAgICAgIC8vIHBvc2l0aW9uIG1vZGUgbmVlZGVkIGZvciBjb3JyZWN0IHBvc2l0aW9uaW5nIG9mIGluZGljYXRvcnNcclxuICAgICAgX3V0aWwuY3NzKF9ib3VuZHNDb250YWluZXIsIHtcclxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBhZGQgbGlzdGVuZXJzIGZvciB1cGRhdGVzXHJcbiAgICBTY2VuZS5vbignY2hhbmdlLnBsdWdpbl9hZGRJbmRpY2F0b3JzJywgaGFuZGxlVHJpZ2dlclBhcmFtc0NoYW5nZSlcclxuICAgIFNjZW5lLm9uKCdzaGlmdC5wbHVnaW5fYWRkSW5kaWNhdG9ycycsIGhhbmRsZUJvdW5kc1BhcmFtc0NoYW5nZSlcclxuXHJcbiAgICAvLyB1cGRhdGVzIHRyaWdnZXIgJiBib3VuZHMgKHdpbGwgYWRkIGVsZW1lbnRzIGlmIG5lZWRlZClcclxuICAgIHVwZGF0ZVRyaWdnZXJHcm91cCgpXHJcbiAgICB1cGRhdGVCb3VuZHMoKVxyXG5cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGRvIGFmdGVyIGFsbCBleGVjdXRpb24gaXMgZmluaXNoZWQgb3RoZXJ3aXNlIHNvbWV0aW1lcyBzaXplIGNhbGN1bGF0aW9ucyBhcmUgb2ZmXHJcbiAgICAgIF9jdHJsLl9pbmRpY2F0b3JzLnVwZGF0ZUJvdW5kc1Bvc2l0aW9ucyhJbmRpY2F0b3IpXHJcbiAgICB9LCAwKVxyXG5cclxuICAgIGxvZygzLCAnYWRkZWQgaW5kaWNhdG9ycycpXHJcbiAgfVxyXG5cclxuICAvLyByZW1vdmUgaW5kaWNhdG9ycyBmcm9tIERPTVxyXG4gIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoSW5kaWNhdG9yLnRyaWdnZXJHcm91cCkge1xyXG4gICAgICAvLyBpZiBub3Qgc2V0IHRoZXJlJ3Mgbm90aGluZyB0byByZW1vdmVcclxuICAgICAgU2NlbmUub2ZmKCdjaGFuZ2UucGx1Z2luX2FkZEluZGljYXRvcnMnLCBoYW5kbGVUcmlnZ2VyUGFyYW1zQ2hhbmdlKVxyXG4gICAgICBTY2VuZS5vZmYoJ3NoaWZ0LnBsdWdpbl9hZGRJbmRpY2F0b3JzJywgaGFuZGxlQm91bmRzUGFyYW1zQ2hhbmdlKVxyXG5cclxuICAgICAgaWYgKEluZGljYXRvci50cmlnZ2VyR3JvdXAubWVtYmVycy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgLy8ganVzdCByZW1vdmUgZnJvbSBtZW1iZXJsaXN0IG9mIG9sZCBncm91cFxyXG4gICAgICAgIHZhciBncm91cCA9IEluZGljYXRvci50cmlnZ2VyR3JvdXBcclxuICAgICAgICBncm91cC5tZW1iZXJzLnNwbGljZShncm91cC5tZW1iZXJzLmluZGV4T2YoSW5kaWNhdG9yKSwgMSlcclxuICAgICAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBMYWJlbChncm91cClcclxuICAgICAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBQb3NpdGlvbnMoZ3JvdXApXHJcbiAgICAgICAgSW5kaWNhdG9yLnRyaWdnZXJHcm91cCA9IHVuZGVmaW5lZFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHJlbW92ZSBjb21wbGV0ZSBncm91cFxyXG4gICAgICAgIHJlbW92ZVRyaWdnZXJHcm91cCgpXHJcbiAgICAgIH1cclxuICAgICAgcmVtb3ZlQm91bmRzKClcclxuXHJcbiAgICAgIGxvZygzLCAncmVtb3ZlZCBpbmRpY2F0b3JzJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqIGludGVybmFsIEV2ZW50IEhhbmRsZXJzXHJcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqL1xyXG5cclxuICAvLyBldmVudCBoYW5kbGVyIGZvciB3aGVuIGJvdW5kcyBwYXJhbXMgY2hhbmdlXHJcbiAgdmFyIGhhbmRsZUJvdW5kc1BhcmFtc0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdXBkYXRlQm91bmRzKClcclxuICB9XHJcblxyXG4gIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gdHJpZ2dlciBwYXJhbXMgY2hhbmdlXHJcbiAgdmFyIGhhbmRsZVRyaWdnZXJQYXJhbXNDaGFuZ2UgPSBmdW5jdGlvbihlKSB7XHJcbiAgICBpZiAoZS53aGF0ID09PSAndHJpZ2dlckhvb2snKSB7XHJcbiAgICAgIHVwZGF0ZVRyaWdnZXJHcm91cCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBCb3VuZHMgKHN0YXJ0IC8gc3RvcCkgbWFuYWdlbWVudFxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKi9cclxuXHJcbiAgLy8gYWRkcyBhbiBuZXcgYm91bmRzIGVsZW1lbnRzIHRvIHRoZSBhcnJheSBhbmQgdG8gdGhlIERPTVxyXG4gIHZhciBhZGRCb3VuZHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2ID0gX2N0cmwuaW5mbygndmVydGljYWwnKVxyXG4gICAgLy8gYXBwbHkgc3R1ZmYgd2UgZGlkbid0IGtub3cgYmVmb3JlLi4uXHJcbiAgICBfdXRpbC5jc3MoX2VsZW1TdGFydC5maXJzdENoaWxkLCB7XHJcbiAgICAgICdib3JkZXItYm90dG9tLXdpZHRoJzogdiA/IDEgOiAwLFxyXG4gICAgICAnYm9yZGVyLXJpZ2h0LXdpZHRoJzogdiA/IDAgOiAxLFxyXG4gICAgICBib3R0b206IHYgPyAtMSA6IG9wdGlvbnMuaW5kZW50LFxyXG4gICAgICByaWdodDogdiA/IG9wdGlvbnMuaW5kZW50IDogLTEsXHJcbiAgICAgIHBhZGRpbmc6IHYgPyAnMCA4cHgnIDogJzJweCA0cHgnLFxyXG4gICAgfSlcclxuICAgIF91dGlsLmNzcyhfZWxlbUVuZCwge1xyXG4gICAgICAnYm9yZGVyLXRvcC13aWR0aCc6IHYgPyAxIDogMCxcclxuICAgICAgJ2JvcmRlci1sZWZ0LXdpZHRoJzogdiA/IDAgOiAxLFxyXG4gICAgICB0b3A6IHYgPyAnMTAwJScgOiAnJyxcclxuICAgICAgcmlnaHQ6IHYgPyBvcHRpb25zLmluZGVudCA6ICcnLFxyXG4gICAgICBib3R0b206IHYgPyAnJyA6IG9wdGlvbnMuaW5kZW50LFxyXG4gICAgICBsZWZ0OiB2ID8gJycgOiAnMTAwJScsXHJcbiAgICAgIHBhZGRpbmc6IHYgPyAnMCA4cHgnIDogJzJweCA0cHgnLFxyXG4gICAgfSlcclxuICAgIC8vIGFwcGVuZFxyXG4gICAgX2JvdW5kc0NvbnRhaW5lci5hcHBlbmRDaGlsZChfZWxlbUJvdW5kcylcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBib3VuZHMgZnJvbSBsaXN0IGFuZCBET01cclxuICB2YXIgcmVtb3ZlQm91bmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfZWxlbUJvdW5kcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF9lbGVtQm91bmRzKVxyXG4gIH1cclxuXHJcbiAgLy8gdXBkYXRlIHRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBvZiB0aGUgc2NlbmVcclxuICB2YXIgdXBkYXRlQm91bmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoX2VsZW1Cb3VuZHMucGFyZW50Tm9kZSAhPT0gX2JvdW5kc0NvbnRhaW5lcikge1xyXG4gICAgICBhZGRCb3VuZHMoKSAvLyBBZGQgQm91bmRzIGVsZW1lbnRzIChzdGFydC9lbmQpXHJcbiAgICB9XHJcbiAgICB2YXIgY3NzID0ge31cclxuICAgIGNzc1tfdmVydGljYWwgPyAndG9wJyA6ICdsZWZ0J10gPSBTY2VuZS50cmlnZ2VyUG9zaXRpb24oKVxyXG4gICAgY3NzW192ZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJ10gPSBTY2VuZS5kdXJhdGlvbigpXHJcbiAgICBfdXRpbC5jc3MoX2VsZW1Cb3VuZHMsIGNzcylcclxuICAgIF91dGlsLmNzcyhfZWxlbUVuZCwge1xyXG4gICAgICBkaXNwbGF5OiBTY2VuZS5kdXJhdGlvbigpID4gMCA/ICcnIDogJ25vbmUnLFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqIHRyaWdnZXIgYW5kIHRyaWdnZXIgZ3JvdXAgbWFuYWdlbWVudFxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKi9cclxuXHJcbiAgLy8gYWRkcyBhbiBuZXcgdHJpZ2dlciBncm91cCB0byB0aGUgYXJyYXkgYW5kIHRvIHRoZSBET01cclxuICB2YXIgYWRkVHJpZ2dlckdyb3VwID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdHJpZ2dlckVsZW0gPSBUUEwudHJpZ2dlcihvcHRpb25zLmNvbG9yVHJpZ2dlcikgLy8gbmV3IHRyaWdnZXIgZWxlbWVudFxyXG4gICAgdmFyIGNzcyA9IHt9XHJcbiAgICBjc3NbX3ZlcnRpY2FsID8gJ3JpZ2h0JyA6ICdib3R0b20nXSA9IDBcclxuICAgIGNzc1tfdmVydGljYWwgPyAnYm9yZGVyLXRvcC13aWR0aCcgOiAnYm9yZGVyLWxlZnQtd2lkdGgnXSA9IDFcclxuICAgIF91dGlsLmNzcyh0cmlnZ2VyRWxlbS5maXJzdENoaWxkLCBjc3MpXHJcbiAgICBfdXRpbC5jc3ModHJpZ2dlckVsZW0uZmlyc3RDaGlsZC5maXJzdENoaWxkLCB7XHJcbiAgICAgIHBhZGRpbmc6IF92ZXJ0aWNhbCA/ICcwIDhweCAzcHggOHB4JyA6ICczcHggNHB4JyxcclxuICAgIH0pXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRyaWdnZXJFbGVtKSAvLyBkaXJlY3RseSBhZGQgdG8gYm9keVxyXG4gICAgdmFyIG5ld0dyb3VwID0ge1xyXG4gICAgICB0cmlnZ2VySG9vazogU2NlbmUudHJpZ2dlckhvb2soKSxcclxuICAgICAgZWxlbWVudDogdHJpZ2dlckVsZW0sXHJcbiAgICAgIG1lbWJlcnM6IFtJbmRpY2F0b3JdLFxyXG4gICAgfVxyXG4gICAgX2N0cmwuX2luZGljYXRvcnMuZ3JvdXBzLnB1c2gobmV3R3JvdXApXHJcbiAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwID0gbmV3R3JvdXBcclxuICAgIC8vIHVwZGF0ZSByaWdodCBhd2F5XHJcbiAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBMYWJlbChuZXdHcm91cClcclxuICAgIF9jdHJsLl9pbmRpY2F0b3JzLnVwZGF0ZVRyaWdnZXJHcm91cFBvc2l0aW9ucyhuZXdHcm91cClcclxuICB9XHJcblxyXG4gIHZhciByZW1vdmVUcmlnZ2VyR3JvdXAgPSBmdW5jdGlvbigpIHtcclxuICAgIF9jdHJsLl9pbmRpY2F0b3JzLmdyb3Vwcy5zcGxpY2UoX2N0cmwuX2luZGljYXRvcnMuZ3JvdXBzLmluZGV4T2YoSW5kaWNhdG9yLnRyaWdnZXJHcm91cCksIDEpXHJcbiAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChJbmRpY2F0b3IudHJpZ2dlckdyb3VwLmVsZW1lbnQpXHJcbiAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwID0gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICAvLyB1cGRhdGVzIHRoZSB0cmlnZ2VyIGdyb3VwIC0+IGVpdGhlciBqb2luIGV4aXN0aW5nIG9yIGFkZCBuZXcgb25lXHJcbiAgLypcclxuICAgKiBMb2dpYzpcclxuICAgKiAxIGlmIGEgdHJpZ2dlciBncm91cCBleGlzdCwgY2hlY2sgaWYgaXQncyBpbiBzeW5jIHdpdGggU2NlbmUgc2V0dGluZ3Mg4oCTIGlmIHNvLCBub3RoaW5nIGVsc2UgbmVlZHMgdG8gaGFwcGVuXHJcbiAgICogMiB0cnkgdG8gZmluZCBhbiBleGlzdGluZyBvbmUgdGhhdCBtYXRjaGVzIFNjZW5lIHBhcmFtZXRlcnNcclxuICAgKiBcdCAyLjEgSWYgYSBtYXRjaCBpcyBmb3VuZCBjaGVjayBpZiBhbHJlYWR5IGFzc2lnbmVkIHRvIGFuIGV4aXN0aW5nIGdyb3VwXHJcbiAgICpcdFx0XHQgSWYgc286XHJcbiAgICogICAgICAgQTogaXQgd2FzIHRoZSBsYXN0IG1lbWJlciBvZiBleGlzdGluZyBncm91cCAtPiBraWxsIHdob2xlIGdyb3VwXHJcbiAgICogICAgICAgQjogdGhlIGV4aXN0aW5nIGdyb3VwIGhhcyBvdGhlciBtZW1iZXJzIC0+IGp1c3QgcmVtb3ZlIGZyb20gbWVtYmVyIGxpc3RcclxuICAgKlx0IDIuMiBBc3NpZ24gdG8gbWF0Y2hpbmcgZ3JvdXBcclxuICAgKiAzIGlmIG5vIG5ldyBtYXRjaCBjb3VsZCBiZSBmb3VuZCwgY2hlY2sgaWYgYXNzaWduZWQgdG8gZXhpc3RpbmcgZ3JvdXBcclxuICAgKiAgIEE6IHllcywgYW5kIGl0J3MgdGhlIG9ubHkgbWVtYmVyIC0+IGp1c3QgdXBkYXRlIHBhcmFtZXRlcnMgYW5kIHBvc2l0aW9ucyBhbmQga2VlcCB1c2luZyB0aGlzIGdyb3VwXHJcbiAgICogICBCOiB5ZXMgYnV0IHRoZXJlIGFyZSBvdGhlciBtZW1iZXJzIC0+IHJlbW92ZSBmcm9tIG1lbWJlciBsaXN0IGFuZCBjcmVhdGUgYSBuZXcgb25lXHJcbiAgICogICBDOiBubywgc28gY3JlYXRlIGEgbmV3IG9uZVxyXG4gICAqL1xyXG4gIHZhciB1cGRhdGVUcmlnZ2VyR3JvdXAgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0cmlnZ2VySG9vayA9IFNjZW5lLnRyaWdnZXJIb29rKCksXHJcbiAgICAgIGNsb3NlRW5vdWdoID0gMC4wMDAxXHJcblxyXG4gICAgLy8gSGF2ZSBhIGdyb3VwLCBjaGVjayBpZiBpdCBzdGlsbCBtYXRjaGVzXHJcbiAgICBpZiAoSW5kaWNhdG9yLnRyaWdnZXJHcm91cCkge1xyXG4gICAgICBpZiAoTWF0aC5hYnMoSW5kaWNhdG9yLnRyaWdnZXJHcm91cC50cmlnZ2VySG9vayAtIHRyaWdnZXJIb29rKSA8IGNsb3NlRW5vdWdoKSB7XHJcbiAgICAgICAgLy8gX3V0aWwubG9nKDAsIFwidHJpZ2dlclwiLCBvcHRpb25zLm5hbWUsIFwiLT5cIiwgXCJubyBuZWVkIHRvIGNoYW5nZSwgc3RpbGwgaW4gc3luY1wiKTtcclxuICAgICAgICByZXR1cm4gLy8gYWxsIGdvb2RcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gRG9uJ3QgaGF2ZSBhIGdyb3VwLCBjaGVjayBpZiBhIG1hdGNoaW5nIG9uZSBleGlzdHNcclxuICAgIC8vIF91dGlsLmxvZygwLCBcInRyaWdnZXJcIiwgb3B0aW9ucy5uYW1lLCBcIi0+XCIsIFwib3V0IG9mIHN5bmMhXCIpO1xyXG4gICAgdmFyIGdyb3VwcyA9IF9jdHJsLl9pbmRpY2F0b3JzLmdyb3VwcyxcclxuICAgICAgZ3JvdXAsXHJcbiAgICAgIGkgPSBncm91cHMubGVuZ3RoXHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIGdyb3VwID0gZ3JvdXBzW2ldXHJcbiAgICAgIGlmIChNYXRoLmFicyhncm91cC50cmlnZ2VySG9vayAtIHRyaWdnZXJIb29rKSA8IGNsb3NlRW5vdWdoKSB7XHJcbiAgICAgICAgLy8gZm91bmQgYSBtYXRjaCFcclxuICAgICAgICAvLyBfdXRpbC5sb2coMCwgXCJ0cmlnZ2VyXCIsIG9wdGlvbnMubmFtZSwgXCItPlwiLCBcImZvdW5kIG1hdGNoXCIpO1xyXG4gICAgICAgIGlmIChJbmRpY2F0b3IudHJpZ2dlckdyb3VwKSB7XHJcbiAgICAgICAgICAvLyBkbyBJIGhhdmUgYW4gb2xkIGdyb3VwIHRoYXQgaXMgb3V0IG9mIHN5bmM/XHJcbiAgICAgICAgICBpZiAoSW5kaWNhdG9yLnRyaWdnZXJHcm91cC5tZW1iZXJzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyBpcyBpdCB0aGUgb25seSByZW1haW5pbmcgZ3JvdXA/XHJcbiAgICAgICAgICAgIC8vIF91dGlsLmxvZygwLCBcInRyaWdnZXJcIiwgb3B0aW9ucy5uYW1lLCBcIi0+XCIsIFwia2lsbFwiKTtcclxuICAgICAgICAgICAgLy8gd2FzIHRoZSBsYXN0IG1lbWJlciwgcmVtb3ZlIHRoZSB3aG9sZSBncm91cFxyXG4gICAgICAgICAgICByZW1vdmVUcmlnZ2VyR3JvdXAoKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgSW5kaWNhdG9yLnRyaWdnZXJHcm91cC5tZW1iZXJzLnNwbGljZShJbmRpY2F0b3IudHJpZ2dlckdyb3VwLm1lbWJlcnMuaW5kZXhPZihJbmRpY2F0b3IpLCAxKSAvLyBqdXN0IHJlbW92ZSBmcm9tIG1lbWJlcmxpc3Qgb2Ygb2xkIGdyb3VwXHJcbiAgICAgICAgICAgIF9jdHJsLl9pbmRpY2F0b3JzLnVwZGF0ZVRyaWdnZXJHcm91cExhYmVsKEluZGljYXRvci50cmlnZ2VyR3JvdXApXHJcbiAgICAgICAgICAgIF9jdHJsLl9pbmRpY2F0b3JzLnVwZGF0ZVRyaWdnZXJHcm91cFBvc2l0aW9ucyhJbmRpY2F0b3IudHJpZ2dlckdyb3VwKVxyXG4gICAgICAgICAgICAvLyBfdXRpbC5sb2coMCwgXCJ0cmlnZ2VyXCIsIG9wdGlvbnMubmFtZSwgXCItPlwiLCBcInJlbW92aW5nIGZyb20gcHJldmlvdXMgbWVtYmVyIGxpc3RcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGpvaW4gbmV3IGdyb3VwXHJcbiAgICAgICAgZ3JvdXAubWVtYmVycy5wdXNoKEluZGljYXRvcilcclxuICAgICAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwID0gZ3JvdXBcclxuICAgICAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBMYWJlbChncm91cClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGF0IHRoaXMgcG9pbnQgSSBhbSBvYnZpb3VzbHkgb3V0IG9mIHN5bmMgYW5kIGRvbid0IG1hdGNoIGFueSBvdGhlciBncm91cFxyXG4gICAgaWYgKEluZGljYXRvci50cmlnZ2VyR3JvdXApIHtcclxuICAgICAgaWYgKEluZGljYXRvci50cmlnZ2VyR3JvdXAubWVtYmVycy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAvLyBfdXRpbC5sb2coMCwgXCJ0cmlnZ2VyXCIsIG9wdGlvbnMubmFtZSwgXCItPlwiLCBcInVwZGF0aW5nIGV4aXN0aW5nXCIpO1xyXG4gICAgICAgIC8vIG91dCBvZiBzeW5jIGJ1dCBpJ20gdGhlIG9ubHkgbWVtYmVyID0+IGp1c3QgY2hhbmdlIGFuZCB1cGRhdGVcclxuICAgICAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwLnRyaWdnZXJIb29rID0gdHJpZ2dlckhvb2tcclxuICAgICAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBQb3NpdGlvbnMoSW5kaWNhdG9yLnRyaWdnZXJHcm91cClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBfdXRpbC5sb2coMCwgXCJ0cmlnZ2VyXCIsIG9wdGlvbnMubmFtZSwgXCItPlwiLCBcInJlbW92aW5nIGZyb20gcHJldmlvdXMgbWVtYmVyIGxpc3RcIik7XHJcbiAgICAgICAgSW5kaWNhdG9yLnRyaWdnZXJHcm91cC5tZW1iZXJzLnNwbGljZShJbmRpY2F0b3IudHJpZ2dlckdyb3VwLm1lbWJlcnMuaW5kZXhPZihJbmRpY2F0b3IpLCAxKSAvLyBqdXN0IHJlbW92ZSBmcm9tIG1lbWJlcmxpc3Qgb2Ygb2xkIGdyb3VwXHJcbiAgICAgICAgX2N0cmwuX2luZGljYXRvcnMudXBkYXRlVHJpZ2dlckdyb3VwTGFiZWwoSW5kaWNhdG9yLnRyaWdnZXJHcm91cClcclxuICAgICAgICBfY3RybC5faW5kaWNhdG9ycy51cGRhdGVUcmlnZ2VyR3JvdXBQb3NpdGlvbnMoSW5kaWNhdG9yLnRyaWdnZXJHcm91cClcclxuICAgICAgICBJbmRpY2F0b3IudHJpZ2dlckdyb3VwID0gdW5kZWZpbmVkIC8vIG5lZWQgYSBicmFuZCBuZXcgZ3JvdXAuLi5cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gX3V0aWwubG9nKDAsIFwidHJpZ2dlclwiLCBvcHRpb25zLm5hbWUsIFwiLT5cIiwgXCJhZGQgYSBuZXcgb25lXCIpO1xyXG4gICAgLy8gZGlkIG5vdCBmaW5kIGFueSBtYXRjaCwgbWFrZSBuZXcgdHJpZ2dlciBncm91cFxyXG4gICAgYWRkVHJpZ2dlckdyb3VwKClcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogVGVtcGxhdGVzIGZvciB0aGUgaW5kaWNhdG9yc1xyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqL1xyXG52YXIgVFBMID0ge1xyXG4gIHN0YXJ0OiBmdW5jdGlvbihjb2xvcikge1xyXG4gICAgLy8gaW5uZXIgZWxlbWVudCAoZm9yIGJvdHRvbSBvZmZzZXQgLTEsIHdoaWxlIGtlZXBpbmcgdG9wIHBvc2l0aW9uIDApXHJcbiAgICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaW5uZXIudGV4dENvbnRlbnQgPSAnc3RhcnQnXHJcbiAgICBfdXRpbC5jc3MoaW5uZXIsIHtcclxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXHJcbiAgICAgICdib3JkZXItd2lkdGgnOiAwLFxyXG4gICAgICAnYm9yZGVyLXN0eWxlJzogJ3NvbGlkJyxcclxuICAgICAgY29sb3I6IGNvbG9yLFxyXG4gICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsXHJcbiAgICB9KVxyXG4gICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgLy8gd3JhcHBlclxyXG4gICAgX3V0aWwuY3NzKGUsIHtcclxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXHJcbiAgICAgIHdpZHRoOiAwLFxyXG4gICAgICBoZWlnaHQ6IDAsXHJcbiAgICB9KVxyXG4gICAgZS5hcHBlbmRDaGlsZChpbm5lcilcclxuICAgIHJldHVybiBlXHJcbiAgfSxcclxuICBlbmQ6IGZ1bmN0aW9uKGNvbG9yKSB7XHJcbiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICBlLnRleHRDb250ZW50ID0gJ2VuZCdcclxuICAgIF91dGlsLmNzcyhlLCB7XHJcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxyXG4gICAgICAnYm9yZGVyLXdpZHRoJzogMCxcclxuICAgICAgJ2JvcmRlci1zdHlsZSc6ICdzb2xpZCcsXHJcbiAgICAgIGNvbG9yOiBjb2xvcixcclxuICAgICAgJ2JvcmRlci1jb2xvcic6IGNvbG9yLFxyXG4gICAgfSlcclxuICAgIHJldHVybiBlXHJcbiAgfSxcclxuICBib3VuZHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgX3V0aWwuY3NzKGUsIHtcclxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXHJcbiAgICAgICd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLFxyXG4gICAgICAncG9pbnRlci1ldmVudHMnOiAnbm9uZScsXHJcbiAgICAgICdmb250LXNpemUnOiBGT05UX1NJWkUsXHJcbiAgICB9KVxyXG4gICAgZS5zdHlsZS56SW5kZXggPSBaSU5ERVhcclxuICAgIHJldHVybiBlXHJcbiAgfSxcclxuICB0cmlnZ2VyOiBmdW5jdGlvbihjb2xvcikge1xyXG4gICAgLy8gaW5uZXIgdG8gYmUgYWJvdmUgb3IgYmVsb3cgbGluZSBidXQga2VlcCBwb3NpdGlvblxyXG4gICAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGlubmVyLnRleHRDb250ZW50ID0gJ3RyaWdnZXInXHJcbiAgICBfdXRpbC5jc3MoaW5uZXIsIHtcclxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICB9KVxyXG4gICAgLy8gaW5uZXIgd3JhcHBlciBmb3IgcmlnaHQ6IDAgYW5kIG1haW4gZWxlbWVudCBoYXMgbm8gc2l6ZVxyXG4gICAgdmFyIHcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgX3V0aWwuY3NzKHcsIHtcclxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXHJcbiAgICAgICdib3JkZXItd2lkdGgnOiAwLFxyXG4gICAgICAnYm9yZGVyLXN0eWxlJzogJ3NvbGlkJyxcclxuICAgICAgY29sb3I6IGNvbG9yLFxyXG4gICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsXHJcbiAgICB9KVxyXG4gICAgdy5hcHBlbmRDaGlsZChpbm5lcilcclxuICAgIC8vIHdyYXBwZXJcclxuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIF91dGlsLmNzcyhlLCB7XHJcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxyXG4gICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxyXG4gICAgICAnd2hpdGUtc3BhY2UnOiAnbm93cmFwJyxcclxuICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxyXG4gICAgICAnZm9udC1zaXplJzogRk9OVF9TSVpFLFxyXG4gICAgfSlcclxuICAgIGUuc3R5bGUuekluZGV4ID0gWklOREVYXHJcbiAgICBlLmFwcGVuZENoaWxkKHcpXHJcbiAgICByZXR1cm4gZVxyXG4gIH0sXHJcbn1cclxuIl19